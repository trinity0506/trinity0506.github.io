---
title: 魔方机器人历史概述
date: 2024-01-17 12:08:30
tags:
---
# 智能魔方机器人历史概述

## 201106-智能魔方机器人的视觉感知与复原算法研究
### 计算机视觉研究现状

从20世纪60年代开始 ，人们着手研究机器人视觉系统 。一幵始 ，视觉系统智能识
别平面上的类似积木的物体。到了20世纪70年代，已经可以认识某些加工部件，也能
认识室内的桌子 、电话等物品了。当时的研究工作虽然进展很快，却无法用于实际。这
是因为视觉系统的信息量极大，处理这些信息的硬件系统十分庞大，花费的时间也很长 。
随着大规模、超大规模集成电路技术的发展，计算机内存的体积不断缩小，价格急剧下
降，速度不断提高，视觉系统也走向了实用化。然而，20世纪80年代后，由于微计
算机的飞速发展，实用的视觉系统进入各个领域，其中用于机器人视觉系统的数量
也很多。美国大学的马尔教授创立了视觉计算理论，使视觉的研究前进 了 一大步 ，
其观点逐步为大多数计算机视觉研究者所接受，并成为这一领域的主导思想。马尔首
先解决了研究视觉理论的策略问题，他认为视觉是一个复杂的信息处理问题，要完整地
理解视觉，必须从三个不同的层次上对它进行解释：第一个层次是信息处理问题的计算
理论，在这个层次上所研究的是对什么信息进行计算和为什么要进行这些计算；第二个
层次是算法，它所研究的是如何进行所要求的计算，也就是要涉及特定的算法； 第三个
层次是执行，它研究完成某一特定算法的具体结构。从计算理论这个层次来看，马尔教
师提出的视觉信息处理必须用三级内部表象加以描述。机器视觉可以看作从三维环境的
图像中抽取、描述和解释信息的过程。因此，机器视觉可以分为感觉、预处理、 分割、
描述、识别和解释六个主要部分 。

### 魔方图像的采集与处理

应用于视频采集的方法主要有三种，一种是基于VFW的视频采集技术，一种是基于视频采集卡厂商
提供的SDK的视频采集技术一种是基于Directshow的视频采集技术。第一种捕捉图像对计算机内存的
要求较高，常出现视频滞后的现象，本系统采用第二种方法采集图像。本文采用以CCD（charge
couple device,电荷耦合器件）半导体为基本部件的摄像头，具有通透性、敏锐度好、颜色还原
和曝光可保证基本准确，噪声小，信噪比大等优点。本系统的魔方图像采集是在C++的环境下来编译
运行含有OpenCV类库的程序以达到实现计算机视觉图像采集及处理的目的。

本系统对采集后的照片进行灰度化处理，即图像的二值化处理。用1表示对象（黑色）区域，用
0表示背景（白色）区域。常用的二值化方法有p参数法、模式法、最大方差比方法以及可变阈值法。

为了改善魔方图像的质量，通常使用图形增强和图像复原两种方法。图像增强技术是不考虑图像退
化的原因，只是将图像中感兴趣的特征有选择的突出， 而衰减不需要的特征， 改善后的图像不一定
要去逼近原始图像，其主要目的是使处理后的图像对某种特定的应用来说，比原始图像更实用。
图像复原技术则与增强技术不用， 它需要了解图像退化的原因， 需要根据图像退化过程的某
些先验知识， 建立“ 模型” ， 再借助该模型按照某种处理方法，回复或重建原来的图像。本文
采用的图像增强技术，目的是增强图像的视觉效果，提高图像的清晰度，使其更加便于人或者机器处理。
图像增强主要采用空域增强和频域增强两种方法。出于对实时性的考虑， 在本系统中用灰度拉伸、直方
图均衡化和同态增晰来增强对比度。后面还有对图像去除噪声等处理， 以进一步增强图像。

中值滤波的突出优点是在消除噪声的同时， 还能防止边缘模糊。中值滤波对消除孤
立点和线段的干扰十分有效， 如果图像的噪声多是孤立的点， 这些点对应的像素又少，
而图像则是有像素较多、面积较大的块构成， 从图可以看出中值滤波的效果很好。但对
于消除高斯噪声则效果不佳。

本系统通过图像阈值法进行分割。图像阈值化分割是一种最常用， 同时也是最简单的图像分割方法，
阈值方法是图像分割中算法最多的一类， 它特别适用于目标和背景占据不同灰度级范围的图像，是面向
图像区域进行图像分割操作的最直接的方法。它不仅可以极大的压缩数据量，而且也大
大简化了分析和处理的步骤。对模仿图像阈值化的目的是按照灰度级，对像素集合进行
一个划分，得到的每个子集形成一个与现实景物相对应的区域，各个区域内部具有一致
的属性，进而对之分析处理。一般的阈值分割方法其研究的关键在于如何选择阈值，
即估计目标特征值所对应的特征空间中一个或几个连续区间。常用的有类间方差阈值分割，
迭代阈值区间分割，Sobel边缘检测分割

### 基于BP神经网络的魔方小块颜色识别

BP神经网络是一种具有三层或三层以上的阶层神经网络。由输入层节点， 隐含层节
点和输出层节点构成。下一层的每一个单元与上一层的每一个单元之间采用全互连的方
式。同一层神经元之间不存在相互连接。网络的每一个输入节点表示魔方图像提取特征
后特征向量的一个分量数据， 输出节点表示分类序号， 分类判决可以采用输出最大值法。

BP算法有两部分组成： 信息的正向传递与误差的反向传输。在整向传输中， 输入信
息从输入经隐含层逐层技术传向输出层， 每一层神经元的状态只影响下一层神经元的状
态。如果在输出层没有得到期望的输出， 则计算输出层的误差变化值， 然后转向反向传
播， 通过网络将误差信号沿原来的连接通路反传胡来修改各层神经元的权值直至达到期
望目标。

BP神经网络的实现分为两个阶段， 即学习训练阶段和识别工作阶段。在学习阶段输
入要学习的样本， 按照网络初始设定的权重、阈值以及传输函数进行计算， 得出每一层
神经元得输出， 这是从左边的层右上进行的。通过理想输出与实际输出层之间的误差来
决定是否对权重、阈值进行修改， 这个修改是从右边的层向左进行的。两个过程反复进
行，直到网络收敛为止，此为学习阶段。权重的学习就是不断的调整各个神经元的连
接强度，使其能在最小二乘的意义上逼近所对应的输出。
![ ](https://pic.imgdb.cn/item/65a7a9d0871b83018a7bee9d.jpg)

### 魔方复原系统

本系统采用了较为符合人类直觉的层先法，并使用LEGO魔方机器人辅助完成。
![ ](https://pic.imgdb.cn/item/65a89671871b83018a2f12f7.jpg)




## 201211-魔方还原机器人的视觉子系统设计与实现
### 颜色描述与颜色空间模型

常用颜色空间模型有 ＲＧＢ 颜色空间模型、ＨＳＶ 颜色空间模型、ＣＭＹＫ
颜色空间模型以及 ＹＵＶ 颜色空间模型等。

ＲＧＢ颜色空间是线性颜色空间，方便在计算机上实现，被广泛用在显示系统中ＲＧＢ
颜色空间通过三原色的叠加描述所有的颜色，直接从颜色生成的角度去描述颜色。
ＲＧＢ 颜色空间在几何上可以表示成一个立方体，ＲＧＢ颜色立方体的３个坐标轴
分别代表Ｒ，Ｇ，Ｂ分量，立方体内部所有颜色都可以表示成三原色的线性组合。
ＨＳＶ颜色空间模型可表示为圆柱坐标系中的一个圆锥形子集，如图２所示。
Ｈ，Ｓ，Ｖ分别代表色调、饱和度和亮度。圆锥的顶面处Ｖ＝１，对应 ＲＧＢ
颜色空间的 Ｒ＝１，Ｇ＝１，Ｂ＝１３个面，表示高亮色彩。色调Ｈ定义为
绕Ｖ轴的旋转角，红色对应于０°，绿色对应于１２０°，蓝色对应于２４０°。
饱和度Ｓ取值从０到１。在圆锥的顶点处，Ｖ＝０，Ｈ和Ｓ无定义，代表黑色；
圆锥的顶面中心处Ｓ＝０，Ｖ＝１，Ｈ 无定义，代表白色。
![ ](https://pic.imgdb.cn/item/65a89966871b83018a37f126.jpg)

ＣＭＹＫ 颜色空间模型与 ＲＧＢ颜色空间模型有相似之处，但ＣＭＹＫ颜色
空间模型主要应用于印刷工业，印刷业通过青（Ｃ）、品（Ｍ）、黄（Ｙ）、
黑（ＢＫ）４色印刷，通过４种颜料不同网点面积率的叠印，得到丰富多彩的颜色。
ＹＵＶ颜色空间是另一种在数字图像处理领域广泛应用的颜色空间模型，主要
用于现代彩色电视系统中，ＹＵＶ颜色空间模型将亮度信号Ｙ和色度信号Ｕ，Ｖ
分离，保持了黑白电视与彩色电视信号的兼容性，传输占用极少的频宽。

### 基于RGB和HSV颜色空间的颜色识别
RGB常用标准色差标定方法，参考目标颜色在ＲＧＢ空间坐标系统中的距离，与
ＲＧＢ颜色空间模型从颜色生成角度描述颜色的方法不同，ＨＳＶ 颜色空间将
物体的色调、饱和度以及亮度作为３个独立的分量分离出来，本质上
与人眼对物体的感知一致。二者间存在对应的转换关系。
![](https://pic.imgdb.cn/item/65a8b709871b83018a966c8c.jpg)

### 视觉系统搭建
本系统采 用 ＭｉｃｒｏＶｉｓｉｏｎ公司的ＭＶ－２００ＵＣ工业摄像头作为
图像采集设备，通过 ＣＣＤ获取魔方面的彩色数字图像，通过计算机进行图像处理，
包括图像的预处理、图像的分割、图像的描述与特征提取，然后将结果通过
传输到后续子系统。经过改进后，在各种光照条件下都能实现魔方的准确识别，
基本实现了魔方还原机器人视觉子系统的设计目标。




## 201903-基于机器视觉的智能魔方机器人研究综述
### 魔方机器人发展概况
1. 济南大学的田田设计了一款解魔方气动组合机械手，如图 2a 所示。 将 CMOS
摄像头作为主要的视觉媒介，捕获魔方各面的图像，通过 RGB 模型完成魔
方色块的颜色识别，以计算机为上位机，采用 TM 法编程计算出复原步骤，
PLC 为下位机，控制气动机械手进行魔方复原。
2. 合肥工业大学张宏平设计的一款类人双臂解魔方机器人，并对
机器人机械部分的整体结构及手臂的结构进行了设计。
3. 大连民族学院的董海洋设计了一款类人四轴解魔方机器人，如图 2b 所示。
设计采用 Android 平台作为上位机，通过摄像头完成颜色扫描，计算出还原指
令，而嵌入式控制板连接舵机，接收Android客户端发出的信号，统一调度各舵机，
两两相对且相互垂直的4个机械手臂作为操纵设备，执行魔方复原动作。
4. 云南师范大学的刘远法设计了一款基于Arduino单片机的解魔方机器人，
其结构与图 2c 所示魔方机器人类似。 以 Android 作为主控平台，颜色传感器
作为颜色识别装置，采用Arduino单片机控制一只机械臂和一个可旋转的底座相互配合，
实现魔方的翻转和各面旋转。
5. 东北大学的王中锋开发了一款魔方机器人展示系统，结构与图 2d 类似。
利用单目 USB 摄像头作为视觉传感器用于魔方图像的采集， 以通用计算机作为解
魔方机器人系统的核心，通过蓝牙模块实现计算机与乐高组件拼装的魔方机器人之间
的无线通信， 还配有超声波传感器和压力传感器作为监测装置。同时，还设计
了三维魔方演示系统，提高了系统的交互性与观赏性
6. 东北大学的梁小龙开发设计了一款魔方机器人展示系统，结构与图 2d 类似。
利用颜色传感器作为视觉模块，以 PC 机为上位机，采用 TM 算法计算复原步
骤， 采用 LEGO 机器人的 NTX 控制器作为下位机，控制乐高组件搭建的执行部分。
还开发了 3D 虚拟魔方展示软件作为用户交互体验模块，实现了人机虚拟互动。
7. 国外开发的魔方机器人，最早出现的是在 2010 年世界制造者博览会上进行展出
的Cubinator，如图 2e所示。 这款机器人由 Pete Redmond 设计，由相互垂直
的两个机械臂完成魔方复原动作。
8. 澳大利亚斯威本科技大学（Swinburne University）研制了一款名为Ruby
的魔方机器人，结构与上面提到的Cubinator类似，如图2f所示，曾以10．96 s的
成绩打破机器人复原魔方的最快纪录。
9. 德国 Albert Beer 设计的魔方机器人 Sub1 是目前世界上复原魔方最快的机器人
，其主要结构为空间中相互垂直的6个旋转轴。它能在1s内复原任意打乱的魔方，
如图 2g 所示。
10. ARM 工程师 Gilday 设计的由乐高组件拼接的魔方机器人CubeStrom
采用智能手机作为处理器，采用相互垂直的 4 个机械臂对魔方进行复原操作，如图
2h 所示。
![](https://pic.imgdb.cn/item/65a8ba5f871b83018aa1bbc8.jpg)
![](https://pic.imgdb.cn/item/65a8ba7c871b83018aa2216c.jpg)

### 状态识别模块
各种魔方机器人所采用的魔方状态识别模块在硬件上基本采用两种形式，一种是
采用 RGB 颜色传感器依次扫描魔方的 54 个小面，读取出它们颜色的R，G，B分量值，
并通过进一步处理获取魔方颜色状态。另一种是采用 CCD 摄像头获取
魔方6个表面的图像，再通过图像处理与识别，得到魔方各个小色块的颜色信息。
颜色传感器功能较为单一，多用于识别某几种特定的颜色，由于魔方标准配色
只有 6 种颜色，因此，颜色传感器可以实现对其颜色的识别。但是，颜色传感器
对识别目标所处的光照条件有较为严格的要求， 光照条件的变化会导致传感器输出
的 R，G，B 分量值波动较大。而CCD摄像头进行颜色识别时，将采样和处理过程分离，
这样颜色识别过程的灵活性就大大增强，使计算机后续处理的优化和改进更加方便。

### 复原步骤求解模块
目前主流的复原方法有层先法，CFOP法，TM法三种。TM法得出的复原步骤较少，但
计算复原步骤的时间较长，且复原步骤不直观，不适合魔方机器人作为展示使用。
由于CFOP法所需的复原魔方公式较多， 并不适合编写成计算机程序来求解魔
方复原步骤。但是，东北大学的梁小龙采用简化的CFOP 法对魔方进行复原，将CFOP法
中部分公式与层先法相结合， 成为一种适用于用计算机程序语言实现
的魔方解法。
![](https://pic.imgdb.cn/item/65a8c1c1871b83018aba468a.jpg)

### 复原动作执行模块
现有魔方机器人的复原动作执行模块分为如下几种：（1）托盘与推杆结构；
（2）四轴旋转结构；（3）六轴旋转结构；（4）多自由度单臂结构；
（5）少自由度双臂结构；（6）多自由度双臂结构
张雪娇、王中锋、梁小龙设计的基于乐高组件拼装的魔方机器人，
均采用托盘与推杆结构。 其中，推杆可以夹持魔方上部，在托住魔方底层的托盘配合
下旋转魔方底面；同时，推杆还可以推动魔方使之倾倒翻转，使其他层落入托盘中，
实现旋转魔方不同层。 此种结构较为简单，采用两个舵机即可独立控制，但是复
原动作不灵活，需要大量重复翻转魔方才能实现对不同层的旋转。
田田、董海洋设计的用于魔方机器人的四轴旋转结构由平面上两两相对、相互垂直的
4个机械手臂组成，每个机械手臂可以实现伸缩、旋转、手爪的张开与闭合，
从而实现对魔方进行翻转、单层旋转和夹持。
Albert Beer设计的魔方机器人所使用的六轴旋转结构由空间中两两相对、
相互垂直的 6 个旋转轴组成，6 个旋转轴分别夹持魔方 6 个面的中心块。 由魔方
的结构可知，通过旋转中心块，就可以带动中心块所在的层旋转，这样，无需整体翻转
魔方就可以实现 6 个面相互独立的旋转，动作执行效率较高。但是作为魔方复
原展示系统则观赏性与科技感不强。
刘远法设计的用于魔方机器人的多自由度单臂结构即采用普通的 6 自由度机械臂，
与固定在工作台上可以水平旋转的魔方托架相配合，实现魔方的单层旋转与整体转动
以完成魔方的复原。
张宏平设计的魔方机器人所采用的少自由度双臂结构由平面上相互垂直的两个双臂组成，
每个机械臂可以实现伸缩、旋转和张开或者闭合手爪等动作，可以视为四轴旋转结构
的一种简化形式。 但是由于双臂自由度较少，不能主动从工作台表面夹取魔方，需要一
个升举机构将魔方升至双臂手爪可以抓取到的位置。多自由度双臂结构采用具有6个
甚至更多自由度的两个机械臂相互配合进行魔方复原，此魔方机器人由于采用自由度
冗余的双臂， 使得其具备从工作台表面抓取魔方的能力， 而不需要其他辅助升举魔方的机
构。 而且灵活的双臂使得摄像头获取魔方各面图像更为方便。 此类采用多自由度双臂结构
的机器人多为机器人厂商为展示其产品的先进性和科技感的成品机器人，例如瑞士 ABB 公司
的双臂机器人 YuMi 和日本安川公司的双臂机器人 MH5F。




## 201908-基于DFS的二指双臂魔方机器人
### 工作流程
![](https://pic.imgdb.cn/item/65a8c6da871b83018acb52c2.jpg)

### 视觉识别
本系统采用双摄像头对棱边进行提取色彩信息。单个相机可获得魔方两面四边形色彩区域。分
割为左右两区域，并进行定轮廓框选。针对四边区域进行仿射变换获得正视魔方面图像，校正
后对各颜色块顶坐标色彩区域进行提取。在色彩空间HSV中进行颜色识别，该方法有利于削弱
光线强弱对色彩识别的影响。仿射变换后的面已经被旋转矫正，只需按特定坐标顺序读取魔方
面信息。采用K-mean算法进行识别，该方法自动实现识别过程，且具有很强的抗干扰能力。

### 魔方还原步骤
利用kociemba算法求解魔方，可获得执行编码，并采用DFS算法进行优化。

### 深度优先搜索优化模型建立
DFS算法是一种用于遍历或搜索树或图的算法，当一个问题的实现方式有许多种的时候可以实现
选择方式的最优。采用了计算机递归的思想。单独采用DFS采用了暴力枚举的方式，回溯算法是
类似枚举的搜索的尝试过程，当发现已经不满足求解条件就“回溯返回”，回溯带有剪枝算法，
减去一些已经不满足要求的状态节点，从而在更少的状态节点中生成目标。考虑本文中的问题已经
两种算法的优点，模型把问题转化为一个带权重的二叉树，寻找最短路径的问题。运动DFS+回溯算
法在搜索最优模型中去除已经不满足条件的路径，以最短的时间，最少的计算量输出最优的结果。
算法步骤优化是对全局机械执行步所消耗时间的优化。。从图中可以看出该DFS算法具有明显的优化
效果。对比最长执行步和最短执行步，可知在双手臂求解魔方过程中，全局执行路径优化空间是极大的。
![](https://pic.imgdb.cn/item/65a8c960871b83018ad37b94.jpg)
依据不同硬件条件下，不同机械执行步所占的时间优势不同，设定机械步权重，寻找一种最优的执行
效益组合。最终充分优化了系统求解魔方的时间。




## 202100-Advanced Rubik's Cube Algorithmic Solver
### 硬件布置
![](https://pic.imgdb.cn/item/65a8d16b871b83018aee3ad0.jpg)
四个摄像头用于捕获魔方六个面的颜色信息，接着将颜色空间由BGR转化为HSV，其优点为六种不同的
颜色仅靠H（hue,色相）就可分辨。接着由下列表格得到54个色块的颜色信息。
![](https://pic.imgdb.cn/item/65a8cc15871b83018adca0e7.jpg)

### 还原算法
#### Kociemba算法
又称二阶段算法，第一阶段旨在将魔方还原到一个特殊的状态，在此状态下魔方仅靠{U,D,R2,L2,F2,B2}
就可将魔方完全还原。而第二阶段即将魔方完全还原。
#### blindfolded method
该方法旨在在不改变某些特定角块的位置的前提下，将魔方还原的方法。
在机器人上分别多次测试这两种方法，第一种平均用时1.65秒，得到19.6步的解决方案，第二种平均用时
15.06秒，得到244.3步的解决方案。

本系统在原来Kociemba算法的基础上设计了一个名为ARCAS的程序，用于直观的显示与操作魔方的初始
状态与还原步骤。
![](https://pic.imgdb.cn/item/65a8cef9871b83018ae63a67.jpg)




## 202109-解魔方竞赛机器人设计
### 机械系统设计
机械臂由57步进电机驱动，通过联轴器与MK21气滑环旋转运动件相连。气滑环上通过订做的连接件
与MHF2-12D型手指气缸相连。
![](https://pic.imgdb.cn/item/65a8d242871b83018af10824.jpg)

### 图像采集与颜色识别
采集模仿图像有四个摄像头，由于夹持魔方的机械手指遮挡魔方表面的部分色块，需要旋转魔方90°，
再次拍摄魔方照片，才能实现魔方表面图像的一次完整采集。
![](https://pic.imgdb.cn/item/65a8d30f871b83018af3a011.jpg)
魔方表面的色块颜色识别和自动追踪色块位置的程序，采用OpenCV3.4.0计算机视觉库编写。
普通光照环境下，采用RGB模型和HSV模型识别魔方表面色块实验各30次，结果表明，RGB模型成功识别
色块 22 次，正确率 73.3%，HSV 模型成功识别色块 29次，准确率96.7%。若现场有强光直射或者其
他颜色的杂光，采用RGB模型和HSV模型识别魔方表面色块实验各30次，结果表明，RGB模型成功识别
色块15次，正确率50%，HSV模型成功识别色块28次，准确率93.3%。机器人视觉系统读取同一色块中的
10个像素点的像素值，摄像头采集魔方图片时，采用偏振镜滤除色块反光采用imread函数读入图
像，进行同态滤波和降噪处理后，合并成一张包含魔方 6 个面的待处理图，采用 K-Means 聚类
算法，判断图像颜色的分类结果，是否满足魔方角块不同色、棱块不同色的条件。

### 还原程序设计
机器人采用Two-Phase Algorithm算法解魔方，该算法又称二阶段算法，通过降低魔方的混乱程度，
达到复原效果。

### 机械臂动作
工控机与STM32之间通过串口通讯方式实现数据通信，主要用于：（1）工控机与STM32电路板按摄像头识
别魔方表面的进程进行数据通信，手眼协调，快速完成魔方翻转与表面识别；（2）工控机解算得到魔方
还原步骤后，以字符串的形式发送给STM32板，控制机械臂按步骤还原魔方。

根据设计搭建编程机器人进行魔方还原实验，经实物搭建实验，本文设计的魔方机器人在还原100次随机
打乱的三阶魔方过程中，平均耗时 19 s，最长不超过25 s，基本实现快速还原三阶魔方的设计目的。




## 202200-Research on Color Block Recognition and Restoration Algorithm of Magic Cube Robot
### 色块识别系统
OpenCV是一个面向计算机视觉和机器识别的开源软件库，由C语言和C++组成，并且带有向Python，Ruby，MATLAB
及其他语言的接口。
本系统在摄像头采集魔方各面的照片后，使用OpenCV库寻找照片的ROI（Region of Interest）区域以增加图片
分析的效率。得到魔方照片的RGB信息后，将其转化为有关亮度的信息（lighting scheme），并依此得出魔方的
颜色信息

### 魔方还原系统的研究
本系统采用二阶段魔方还原算法，可以将54个色块的颜色信息转化为一系列魔方的还原步骤。
![](https://pic.imgdb.cn/item/65a8de76871b83018a18f021.jpg)
![](https://pic.imgdb.cn/item/65a8deb8871b83018a19bae2.jpg)




## 总结

### 魔方机器人发展历史
1. 济南大学的田田设计了一款解魔方气动组合机械手，如图 2a 所示。 将 CMOS
摄像头作为主要的视觉媒介，捕获魔方各面的图像，通过 RGB 模型完成魔方色块
的颜色识别，以计算机为上位机，采用 TM 法编程计算出复原步骤，PLC 为下位机，
控制气动机械手进行魔方复原。
2. 合肥工业大学张宏平设计的一款类人双臂解魔方机器人，并对机器人机械部分
的整体结构及手臂的结构进行了设计。
3. 大连民族学院的董海洋设计了一款类人四轴解魔方机器人，如图 2b 所示。
设计采用 Android 平台作为上位机，通过摄像头完成颜色扫描，计算出还原指
令，而嵌入式控制板连接舵机，接收Android客户端发出的信号，统一调度各舵机，
两两相对且相互垂直的4个机械手臂作为操纵设备，执行魔方复原动作。
4. 云南师范大学的刘远法设计了一款基于Arduino单片机的解魔方机器人，
其结构与图 2c 所示魔方机器人类似。 以 Android 作为主控平台，颜色传感器
作为颜色识别装置，采用Arduino单片机控制一只机械臂和一个可旋转的底座相互配合，
实现魔方的翻转和各面旋转。
5. 东北大学的王中锋开发了一款魔方机器人展示系统，结构与图 2d 类似。
利用单目 USB 摄像头作为视觉传感器用于魔方图像的采集， 以通用计算机作为解
魔方机器人系统的核心，通过蓝牙模块实现计算机与乐高组件拼装的魔方机器人之间
的无线通信， 还配有超声波传感器和压力传感器作为监测装置。同时，还设计
了三维魔方演示系统，提高了系统的交互性与观赏性
6. 东北大学的梁小龙开发设计了一款魔方机器人展示系统，结构与图 2d 类似。
利用颜色传感器作为视觉模块，以 PC 机为上位机，采用 TM 算法计算复原步
骤， 采用 LEGO 机器人的 NTX 控制器作为下位机，控制乐高组件搭建的执行部分。
还开发了 3D 虚拟魔方展示软件作为用户交互体验模块，实现了人机虚拟互动。
7. 国外开发的魔方机器人，最早出现的是在 2010 年世界制造者博览会上进行展出
的Cubinator，如图 2e所示。 这款机器人由 Pete Redmond 设计，由相互垂直
的两个机械臂完成魔方复原动作。
8. 澳大利亚斯威本科技大学（Swinburne University）研制了一款名为Ruby
的魔方机器人，结构与上面提到的Cubinator类似，如图2f所示，曾以10．96 s的
成绩打破机器人复原魔方的最快纪录。
9. 德国 Albert Beer 设计的魔方机器人 Sub1 是目前世界上复原魔方最快的机器人
，其主要结构为空间中相互垂直的6个旋转轴。它能在1s内复原任意打乱的魔方，
如图 2g 所示。
10. ARM 工程师 Gilday 设计的由乐高组件拼接的魔方机器人CubeStrom
采用智能手机作为处理器，采用相互垂直的 4 个机械臂对魔方进行复原操作，如图
2h 所示。
11. 北京理工大学的卢桂萍基于现有的六轴和翻滚式魔方机器人，提出更为前沿的
双臂式解魔方机器人。采用双气动手爪，严格处于统一平面且保持相互之间成90°，
并满足强度和刚度需求。经过实验证明，该机器人可以达到还原成功率为97%。
12. 西北农林科技大学的王健鸿设计了一种面向中国高校智能机器人创意大赛的解魔
方机器人，以STM32F103ZET6单片机为控制核心，通过搭载电机驱动器、电控手指气
缸、气滑环，构建了解魔方竞赛机器人的控制系统；基于气动控制的工作方式，设计
了机器人的机械系统和相应的控制算法。经实物搭建实验，该魔方机器人在还原100次
随机打乱的三阶魔方过程中，平均耗时19 s，最长不超过25 s，对于此类竞赛机器人
设计具有一定参考价值。
13. 常熟理工学院的Zhiwen Song基于魔方色块的识别与还原算法，使用K-means聚类
算法以加快识别速度并提高抗干扰能力，使用二阶段还原算法以减少还原难度，获得优
化的还原步骤。
![](https://pic.imgdb.cn/item/65a8ba5f871b83018aa1bbc8.jpg)
![](https://pic.imgdb.cn/item/65a8ba7c871b83018aa2216c.jpg)

### 颜色识别模块
该模块旨在通过摄像头采集得到魔方54个色块的颜色信息

#### 魔方图像采集
采集图像常用的摄像头有
1. 采用 RGB 颜色传感器依次扫描魔方的 54 个小面，读取出它们颜色的R，G，B分量值，
并通过进一步处理获取魔方颜色状态。颜色传感器功能较为单一，多用于识别某几种特定的颜色，
由于魔方标准配色只有 6 种颜色，因此，颜色传感器可以实现对其颜色的识别。但是，颜色
传感器对识别目标所处的光照条件有较为严格的要求， 光照条件的变化会导致传感器输出
的 R，G，B 分量值波动较大。

2. 以CCD（charge couple device,电荷耦合器件）半导体为基本部件的摄像头，具有通透性、
敏锐度好、颜色还原和曝光可保证基本准确，噪声小，信噪比大等优点。CCD摄像头进行颜色
识别时，将采样和处理过程分离，这样颜色识别过程的灵活性就大大增强，使计算机后续处理的
优化和改进更加方便。

#### 图像处理与颜色识别
1. 对采集后的照片进行灰度化处理，即图像的二值化处理。用1表示对象（黑色）区域，用
0表示背景（白色）区域。常用的二值化方法有p参数法、模式法、最大方差比方法以及可变阈值法。

2. 采用RGB颜色空间。ＲＧＢ颜色空间是线性颜色空间，方便在计算机上实现，被广泛用在显示
系统中。ＲＧＢ颜色空间通过三原色的叠加描述所有的颜色，直接从颜色生成的角度去描述颜色
RGB常用标准色差标定方法，参考目标颜色在ＲＧＢ空间坐标系统中的距离以得出目标颜色的参数。

3. ＨＳＶ 颜色空间将物体的色调、饱和度以及亮度作为３个独立的分量分离出来，本质上与人眼
对物体的感知一致。ＨＳＶ颜色空间模型可表示为圆柱坐标系中的一个圆锥形子集Ｈ，Ｓ，Ｖ分别
代表色调、饱和度和亮度。RGB与HSV间存在对应的转换关系。
![](https://pic.imgdb.cn/item/65a8b709871b83018a966c8c.jpg)


可以使用多种方法来降低颜色识别的误差，提高识别精度：

1. 通过图像阈值法进行分割。图像阈值化分割是一种最常用， 同时也是最简单的图像
分割方法，阈值方法是图像分割中算法最多的一类， 它特别适用于目标和背景占据不同
灰度级范围的图像，是面向图像区域进行图像分割操作的最直接的方法。它不仅可以极
大的压缩数据量，而且也大大简化了分析和处理的步骤。对模仿图像阈值化的目的是按照
灰度级，对像素集合进行一个划分，得到的每个子集形成一个与现实景物相对应的区域，
各个区域内部具有一致的属性，进而对之分析处理。一般的阈值分割方法其研究的关键在
于如何选择阈值，即估计目标特征值所对应的特征空间中一个或几个连续区间。常用的有
类间方差阈值分割，迭代阈值区间分割，Sobel边缘检测分割。

2. 利用中值滤波，突出优点是在消除噪声的同时， 还能防止边缘模糊。中值滤波对消除
孤立点和线段的干扰十分有效， 如果图像的噪声多是孤立的点， 这些点对应的像素又少，
而图像则是有像素较多、面积较大的块构成， 从图可以看出中值滤波的效果很好。但对
于消除高斯噪声则效果不佳。

3. 利用BP神经网络的魔方小块的颜色识别。

4. 使用K-means聚类算法以加快识别速度并提高抗干扰能力。

### 还原求解模块
该模块旨在接受魔方54个色块的颜色信息，得到魔方的还原步骤，常有以下方法：

1. 层先法，CFOP法 由于CFOP法所需的复原魔方公式较多， 并不适合编写成计算机
程序来求解魔方复原步骤。但是，东北大学的梁小龙采用简化的CFOP 法对魔方进行
复原，将CFOP法中部分公式与层先法相结合， 成为一种适用于用计算机程序语言实现
的魔方解法。

2. TM法得出的复原步骤较少，但计算复原步骤的时间较长，且复原步骤不直观，不适
合魔方机器人作为展示使用。

3. 二阶段算法又称Kociemba算法，通过降低魔方的混乱程度，达到复原效果。第一阶段
旨在将魔方还原到一个特殊的状态，在此状态下魔方仅靠{U,D,R2,L2,F2,B2}就可将魔方
完全还原。而第二阶段即将魔方完全还原。

4. blindfolded method该方法旨在在不改变某些特定角块的位置的前提下，将魔方还原
的方法。

![](https://pic.imgdb.cn/item/65a8c1c1871b83018aba468a.jpg)

### 动作执行模块
该模块旨在通过得到的复原步骤利用机械臂将魔方还原。
现有魔方机器人的复原动作执行模块分为如下几种：（1）托盘与推杆结构；
（2）四轴旋转结构；（3）六轴旋转结构；（4）多自由度单臂结构；
（5）少自由度双臂结构；（6）多自由度双臂结构
张雪娇、王中锋、梁小龙设计的基于乐高组件拼装的魔方机器人，
均采用托盘与推杆结构。 其中，推杆可以夹持魔方上部，在托住魔方底层的托盘配合
下旋转魔方底面；同时，推杆还可以推动魔方使之倾倒翻转，使其他层落入托盘中，
实现旋转魔方不同层。 此种结构较为简单，采用两个舵机即可独立控制，但是复
原动作不灵活，需要大量重复翻转魔方才能实现对不同层的旋转。
田田、董海洋设计的用于魔方机器人的四轴旋转结构由平面上两两相对、相互垂直的
4个机械手臂组成，每个机械手臂可以实现伸缩、旋转、手爪的张开与闭合，
从而实现对魔方进行翻转、单层旋转和夹持。
Albert Beer设计的魔方机器人所使用的六轴旋转结构由空间中两两相对、相互垂直的
6个旋转轴组成，6个旋转轴分别夹持魔方 6 个面的中心块。 由魔方的结构可知，通过
旋转中心块，就可以带动中心块所在的层旋转，这样，无需整体翻转魔方就可以实现6个
面相互独立的旋转，动作执行效率较高。但是作为魔方复原展示系统则观赏性与科技感
不强。
刘远法设计的用于魔方机器人的多自由度单臂结构即采用普通的 6 自由度机械臂，
与固定在工作台上可以水平旋转的魔方托架相配合，实现魔方的单层旋转与整体转动
以完成魔方的复原。
张宏平设计的魔方机器人所采用的少自由度双臂结构由平面上相互垂直的两个双臂组成，
每个机械臂可以实现伸缩、旋转和张开或者闭合手爪等动作，可以视为四轴旋转结构
的一种简化形式。 但是由于双臂自由度较少，不能主动从工作台表面夹取魔方，需要一
个升举机构将魔方升至双臂手爪可以抓取到的位置。多自由度双臂结构采用具有6个
甚至更多自由度的两个机械臂相互配合进行魔方复原，此魔方机器人由于采用自由度
冗余的双臂，使得其具备从工作台表面抓取魔方的能力， 而不需要其他辅助升举魔方
的机构。 而且灵活的双臂使得摄像头获取魔方各面图像更为方便。 此类采用多自由度
双臂结构的机器人多为机器人厂商为展示其产品的先进性和科技感的成品机器人，例如
瑞士 ABB 公司的双臂机器人 YuMi 和日本安川公司的双臂机器人 MH5F。
卢桂萍的双臂魔方机器人基于STM32单片机采用双气动手爪，严格处于统一平面且保持
相互之间成90°，并满足强度和刚度需求，这决定了还原魔方的速度和机械结构的合理
性，相比于六轴电机结构的魔方机器人具有结构上的特殊性，需要对算法输出结果作出
转换和改变。


